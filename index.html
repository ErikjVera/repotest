<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tabla de Resultados</title>
    <style>
        /* Tu estilo CSS aquí */
        html {
            max-width: 600px;
            margin: auto;
        }

        @media (max-width: 600px) {
            html {
                margin: auto 1rem;
                padding:auto;
            }
            table {
                font-size: 0.7em;
            }
        }

        table {
            width: 90%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        th,
        td {
            border: 1px solid #ddd;
            padding: auto;
            text-align: center;
        }

        th {
            width: 33%;
        }

        .ext {
            width: 20%;
        }

        .tabla,
        .tabla * {
            border: hidden;
            margin: auto;
            max-width: 100%;
        }


        #ee {
            background-color: #f2f2f2;
        }

        /* Bordes superiores después de cierto número de partidos */

        table tr:nth-child(odd) td {
            background-color: #f2f2f2;
        }

        table tr:nth-child(even) td {
            background-color: white;
        }

        table tr:nth-child(4) td {
            border-bottom: 1px solid black;
        }

        table tr:nth-child(8) td {
            border-bottom: 1px solid black;
        }

        table tr:nth-child(11) td {
            border-bottom: 1px solid black;
        }

        table tr:nth-child(14) td {
            border-bottom: 1px solid black;
        }
    </style>
</head>

<body>
    <label for="jornadaSelect">Selecciona la jornada:</label>
    <select id="jornadaSelect"></select>

    <table>
        <thead>
            <tr id="ee">
                <th></th>
                <th class="ext" id="jornadaHeader"></th>
                <th></th>
            </tr>
        </thead>
        <tbody id="partidosBody"></tbody>
    </table>

    <script>
        const jornadaEquipos = {
            jornada27: [
                ['Celta', 'Granada'],
                ['Ath.Club', 'Ath.Madrid'],
                ['Sevilla', 'Getafe'],
                ['Valencia', 'Barcelona'],
                ['Almeria', 'Mallorca'],
                ['R.Sociedad', 'Betis'],
                ['Las Palmas', 'Cádiz'],
                ['R.Madrid', 'Villareal'],
                ['Andorra', 'Espanyol'],
                ['Sporting', 'Leganés'],
                ['Alcorcón', 'Eibar'],
                ['Levante', 'Huesca'],
                ['Amorebieta', 'Zaragoza'],
                ['R.Ferrol', 'Tenerife'],
                ['Girona', 'Alavés'],
            ],
            jornada28: [
                ['Rayo', 'Valencia'],
                ['At.Madrid', 'Getafe'],
                ['Granada', 'Sevilla'],
                ['Barcelona', 'Almeria'],
                ['Ath.Club', 'Las Palmas'],
                ['Villareal', 'Celta'],
                ['Betis', 'Girona'],
                ['Cádiz', 'R.Sociedad'],
                ['Mallorca', 'Osasuna'],
                ['Espanyol', 'Burgos'],
                ['Zaragoza', 'Levante'],
                ['Eibar', 'Sporting'],
                ['Leganés', 'Tenerife'],
                ['Valladolid', 'R.Ferrol'],
                ['Alavés', 'R.Madrid'],
            ],
            
            // Puedes agregar más jornadas según sea necesario
        };

        function llenarSelects() {
            const jornadaSelect = document.getElementById('jornadaSelect');
            const partidosBody = document.getElementById('partidosBody');
            const jornadaHeader = document.getElementById('jornadaHeader');

            for (const jornada in jornadaEquipos) {
                const option = document.createElement('option');
                option.value = jornada;
                option.text = `Jornada ${jornada.slice(7)}`; // Elimina "jornada" del nombre
                jornadaSelect.add(option);
            }

            // Establecer la primera jornada como predeterminada
            const primeraJornada = Object.keys(jornadaEquipos)[0];
            jornadaSelect.value = primeraJornada;
            actualizarTabla(primeraJornada, jornadaHeader);

            // Evento al cambiar la jornada
            jornadaSelect.addEventListener('change', function () {
                const selectedJornada = this.value;
                actualizarTabla(selectedJornada, jornadaHeader);
            });
        }

        function isChecked(opcion, partidoIndex, jornada) {
            // Obtener el estado almacenado de los checkboxes
            const storedState = JSON.parse(localStorage.getItem(jornada)) || {};
            return storedState[partidoIndex] && storedState[partidoIndex][opcion] ? 'checked' : '';
        }

        function actualizarEstadoCheckboxes() {
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            const selectedJornada = document.getElementById('jornadaSelect').value;

            checkboxes.forEach((checkbox) => {
                checkbox.addEventListener('change', function () {
                    const storedState = JSON.parse(localStorage.getItem(selectedJornada)) || {};

                    // Obtener el índice del partido actual
                    const partidoIndex = Array.from(this.closest('tr').parentNode.children).indexOf(this.closest('tr'));

                    if (!storedState[partidoIndex]) {
                        storedState[partidoIndex] = {};
                    }

                    storedState[partidoIndex][this.name] = this.checked;
                    localStorage.setItem(selectedJornada, JSON.stringify(storedState));
                });
            });
        }

        function actualizarTabla(jornada, jornadaHeader) {
            const partidosBody = document.getElementById('partidosBody');
            const enfrentamientos = jornadaEquipos[jornada];

            // Limpiar tabla antes de llenarla con los nuevos equipos
            partidosBody.innerHTML = '';

            enfrentamientos.forEach((pareja, index) => {
                const fila = document.createElement('tr');

                pareja.forEach((equipo) => {
                    const cell = document.createElement('td');
                    cell.textContent = equipo;
                    fila.appendChild(cell);
                });

                const cellExt = document.createElement('td');
                cellExt.className = 'ext';

                // Agregar checkboxes 1x2
                cellExt.innerHTML = `
                    <table class="tabla">
                        <tr>
                            <th>1</th>
                            <th>X</th>
                            <th>2</th>
                        </tr>
                        <tr>
                            <th><input type="checkbox" name="1" value="ON" ${isChecked(1, index, jornada)} /></th>
                            <th><input type="checkbox" name="X" value="ON" ${isChecked('X', index, jornada)} /></th>
                            <th><input type="checkbox" name="2" value="ON" ${isChecked(2, index, jornada)} /></th>
                        </tr>
                    </table>`;

                fila.appendChild(cellExt);
                partidosBody.appendChild(fila);
            });

            // Actualizar la cabecera con la jornada seleccionada
            jornadaHeader.textContent = `Jornada ${jornada.slice(7)}`;
        }

        window.onload = function () {
            llenarSelects();
            actualizarEstadoCheckboxes();
        };
    </script>
</body>

</html>
